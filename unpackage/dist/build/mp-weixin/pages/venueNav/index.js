(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/venueNav/index"],{2539:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var r=function(){var t=this,e=t.$createElement;t._self._c},a=[]},3622:function(t,e,n){"use strict";n.r(e);var i=n("8f88"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a},"3e5f":function(t,e,n){"use strict";var i=n("d72e"),r=n.n(i);r.a},"4e1a":function(t,e,n){"use strict";n.r(e);var i=n("2539"),r=n("3622");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("3e5f");var u,o=n("f0c5"),l=Object(o["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],u);e["default"]=l.exports},"55cf":function(t,e,n){"use strict";(function(t){n("3bee");i(n("66fd"));var e=i(n("4e1a"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"8f88":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("a34a")),r=(n("dc48"),o(n("2ef0"))),a=n("6d26"),u=n("d4d0");function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e,n,i,r,a,u){try{var o=t[a](u),l=o.value}catch(d){return void n(d)}o.done?e(l):Promise.resolve(l).then(i,r)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function u(t){s(a,i,r,u,o,"next",t)}function o(t){s(a,i,r,u,o,"throw",t)}u(void 0)}))}}var g=function(){n.e("components/nav/iconText").then(function(){return resolve(n("e92b"))}.bind(null,n)).catch(n.oe)},h={anchorX:0,anchorY:0,display:"ALWAYS"},p={components:{iconText:g},data:function(){return{bodyWidth:t.getSystemInfoSync().windowWidth,bodyHeight:t.getSystemInfoSync().windowHeight,latitude:0,longitude:0,myLatitude:0,myLongitude:0,myAddress:"",list:[],markers:[],allmarkers:[],typeList:[],currentType:""}},mounted:function(){var e=this;return f(i.default.mark((function n(){return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.showLoading({title:"",mask:!0}),t.getLocation({type:"gcj02",success:function(n){t.hideLoading(),(0,a.getAddress)({latitude:r.default.get(n,"latitude"),longitude:r.default.get(n,"longitude")},(function(t){console.log("localcurrent",t),e.myAddress=r.default.get(t,"address")})),e.latitude=r.default.get(n,"latitude"),e.longitude=r.default.get(n,"longitude"),e.myLatitude=r.default.get(n,"latitude"),e.myLongitude=r.default.get(n,"longitude")}}),e.fetchTypeList(),n.next=5,e.fetchList();case 5:case"end":return n.stop()}}),n)})))()},methods:{fetchTypeList:function(){var t=this;return f(i.default.mark((function e(){var n;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=u.navTypeList,200===n.code&&(t.typeList=r.default.cloneDeep(r.default.get(n,"data.list",[])));case 2:case"end":return e.stop()}}),e)})))()},fetchList:function(){var t=this;return f(i.default.mark((function e(){var n,a;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=u.navData,200===n.code&&(t.list=r.default.get(n,"data.list",[]),a=[],t.list.map((function(e,n){a.push({id:n+1,latitude:e.latitude,longitude:e.longitude,title:e.title,customCallout:d({},h),bgColor:t.getCustomCalloutBgColor(e.type),type:e.type,address:e.address})})),t.markers=[].concat(a),t.allmarkers=[].concat(a));case 2:case"end":return e.stop()}}),e)})))()},getCustomCalloutBgColor:function(t){var e="#333";if(this.typeList.some((function(e){return e.title===t}))){var n=this.typeList.find((function(e){return e.title===t}));e=n.bgColor}return e},handleClick:function(e){this.currentType=e,this.markers=this.allmarkers.filter((function(t){return t.type===e})),this.markers.length>0&&(this.latitude=r.default.get(this.markers,"[0].latitude"),this.longitude=r.default.get(this.markers,"[0].longitude"),t.createMapContext("nav_map",this).moveToLocation({longitude:this.longitude,latitude:this.latitude}))},handleToList:function(){t.navigateTo({url:"../venueList/index"})},handleCallouttap:function(e){t.showLoading({title:"",mask:!0});var n=Number(r.default.get(e,"detail.markerId",0));if(0!==n){var i=this.allmarkers.find((function(t){return t.id===n}));(0,a.getAddress)({latitude:r.default.get(i,"latitude"),longitude:r.default.get(i,"longitude")},(function(e){console.log("localcurrent",e),t.hideLoading(),t.openLocation({latitude:i.latitude,longitude:i.longitude,name:i.address,address:r.default.get(e,"address")})}))}},handleToLocal:function(){t.createMapContext("nav_map",this).moveToLocation({longitude:this.myLongitude,latitude:this.myLatitude})}}};e.default=p}).call(this,n("543d")["default"])},d72e:function(t,e,n){}},[["55cf","common/runtime","common/vendor"]]]);